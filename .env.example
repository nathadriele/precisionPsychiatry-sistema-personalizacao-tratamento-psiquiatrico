# ============================================================================
# Precision Psychiatry - Arquivo de Configuração de Ambiente
# ============================================================================

# ============================================================================
# APLICAÇÃO
# ============================================================================
APP_NAME=Precision Psychiatry
APP_VERSION=1.0.0
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# ============================================================================
# API & SERVIDOR
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_PREFIX=/api/v1
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]

# Chaves de API (gerar com `python -c 'import secrets; print(secrets.token_urlsafe(32))'`)
SECRET_KEY=your-secret-key-change-this-in-production
API_KEY_ADMIN=your-admin-api-key
API_KEY_CLINICAL=your-clinical-api-key

# ============================================================================
# BANCO DE DADOS
# ============================================================================
# PostgreSQL
DATABASE_URL=postgresql://user:password@localhost:5432/precision_psychiatry
DB_ECHO=false
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Redis (para cache e sessões)
REDIS_URL=redis://localhost:6379/0
REDIS_CACHE_TTL=3600

# ============================================================================
# SEGURANÇA & AUTENTICAÇÃO
# ============================================================================
# JWT
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=7

# Encriptação
ENCRYPTION_KEY=your-encryption-key-change-this
FERNET_KEY=your-fernet-key-generate-with-cryptography

# SSL/TLS
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/cert.pem
SSL_KEY_PATH=/etc/ssl/private/key.pem

# ============================================================================
# COMPLIANCE & PRIVACIDADE
# ============================================================================
# GDPR
GDPR_ENABLED=true
DATA_RETENTION_DAYS=1825  # 5 anos
RIGHT_TO_BE_FORGOTTEN=true
DATA_ANONYMIZATION=true

# HIPAA
HIPAA_ENABLED=true
AUDIT_LOGGING=true
ACCESS_LOGGING=true
ENCRYPTION_AT_REST=true
ENCRYPTION_IN_TRANSIT=true

# ============================================================================
# MODELOS DE MACHINE LEARNING
# ============================================================================
MODEL_REGISTRY_PATH=./models
THERAPEUTIC_RESPONSE_MODEL=therapeutic_response_v1
MEDICATION_RESPONSE_MODEL=medication_response_v1
TREATMENT_RESISTANCE_MODEL=treatment_resistance_v1

# Feature engineering
FEATURE_SCALING_METHOD=min_max
HANDLE_MISSING_VALUES=mean
FEATURE_SELECTION_METHOD=variance_threshold

# ============================================================================
# VALIDAÇÃO CLÍNICA
# ============================================================================
# Thresholds de performance
AUC_ROC_THRESHOLD=0.70
SENSITIVITY_THRESHOLD=0.60
SPECIFICITY_THRESHOLD=0.60
PPV_THRESHOLD=0.70

# Monitoramento de bias
BIAS_DETECTION_ENABLED=true
MAX_BIAS_THRESHOLD=0.05
DEMOGRAPHIC_GROUPS=["gender", "age_group", "ethnicity"]

# ============================================================================
# INTEGRAÇÃO COM SISTEMAS EXTERNOS
# ============================================================================
# EHR/EMR Integration
EHR_INTEGRATION_ENABLED=false
EHR_SYSTEM=epic  # epic, cerner, allscripts
EHR_API_URL=https://ehr.hospital.com/api
EHR_API_KEY=your-ehr-api-key

# FHIR
FHIR_ENABLED=true
FHIR_VERSION=R4

# Genomic databases
GENOMIC_DB_API=https://api.genomicdb.com
GENOMIC_DB_KEY=your-genomic-db-key

# ============================================================================
# NOTIFICAÇÕES & ALERTAS
# ============================================================================
# Email
MAIL_ENABLED=true
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=alerts@precisionpsychiatry.com
MAIL_PASSWORD=your-email-password
MAIL_FROM=alerts@precisionpsychiatry.com
MAIL_TLS=true

# Alertas clínicos
CRITICAL_ALERT_EMAIL=clinician@hospital.com
SAFETY_ALERT_EMAIL=safety@hospital.com
SUICIDAL_IDEATION_ALERT=true
ADVERSE_EVENT_ALERT=true

# ============================================================================
# MONITORAMENTO & LOGGING
# ============================================================================
# Sentry (error tracking)
SENTRY_ENABLED=false
SENTRY_DSN=https://key@sentry.io/project-id

# Logging
LOG_FILE_PATH=./logs/precision_psychiatry.log
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=10
LOG_FORMAT=json

# Prometheus (métricas)
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# ============================================================================
# CACHE & PERFORMANCE
# ============================================================================
CACHE_ENABLED=true
CACHE_BACKEND=redis
CACHE_TTL=3600

# Async jobs
CELERY_ENABLED=false
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# ============================================================================
# DADOS DE TESTE & DESENVOLVIMENTO
# ============================================================================
# Dados sintéticos para teste
SYNTHETIC_DATA_ENABLED=true
SYNTHETIC_DATA_PATH=./data/synthetic
SEED_DATABASE=true
SEED_WITH_DEMO_PATIENTS=true

# Modo de teste
TESTING_ENABLED=false
TEST_DATABASE_URL=postgresql://user:password@localhost:5432/precision_psychiatry_test
MOCK_EXTERNAL_SERVICES=true

# ============================================================================
# DEPLOYMENT & KUBERNETES
# ============================================================================
# Docker
DOCKER_REGISTRY=docker.io
DOCKER_IMAGE=precision-psychiatry
DOCKER_TAG=latest

# Kubernetes
K8S_ENABLED=false
K8S_NAMESPACE=precision-psychiatry
K8S_REPLICAS=3

# ============================================================================
# RECURSOS COMPUTACIONAIS
# ============================================================================
# GPU (se disponível)
GPU_ENABLED=false
GPU_MEMORY_FRACTION=0.8

# Limite de CPU
CPU_LIMIT=4
MEMORY_LIMIT=8Gi

# ============================================================================
# DESENVOLVIMENTO LOCAL
# ============================================================================
# Hot reload
HOT_RELOAD=true
RELOAD_DIRS=["src", "precision_psychiatry"]

# Mock services
MOCK_GENOMIC_LAB=true
MOCK_NEUROIMAGING_SERVICE=true
MOCK_EHR_SYSTEM=true

# ============================================================================
# BACKUP & RECOVERY
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # 2am diariamente
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backups/precision_psychiatry

# ============================================================================
# FEATURE FLAGS
# ============================================================================
# Novos recursos em desenvolvimento
ENABLE_TREATMENT_PLANNING=true
ENABLE_OUTCOME_TRACKING=true
ENABLE_FAIRNESS_MONITORING=true
ENABLE_REAL_TIME_ALERTS=false
ENABLE_EXPLAINABILITY_API=true

# ============================================================================
# CONFIGURAÇÕES CLÍNICAS CUSTOMIZADAS
# ============================================================================
# Severidade de depressão (PHQ-9)
PHQ9_MINIMAL_THRESHOLD=5
PHQ9_MILD_THRESHOLD=10
PHQ9_MODERATE_THRESHOLD=15
PHQ9_SEVERE_THRESHOLD=20

# Tempo mínimo de seguimento
MIN_FOLLOWUP_DAYS=84

# ============================================================================
# PROXY & REDE
# ============================================================================
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1

# ============================================================================
# CREDENCIAIS DE TERCEIROS 
# ============================================================================
# AWS
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=precision-psychiatry-backups

# Google Cloud
GCP_PROJECT_ID=
GCP_CREDENTIALS_PATH=

# Azure
AZURE_SUBSCRIPTION_ID=
AZURE_RESOURCE_GROUP=

# ============================================================================
# CONFIGURAÇÕES ESPECÍFICAS DA ORGANIZAÇÃO
# ============================================================================
HOSPITAL_NAME=Hospital de Precisão
HOSPITAL_CODE=HPR001
DEPARTMENT=Psiquiatria
CLINICIAN_EMAIL=clinician@hospital.com

# ============================================================================
# NOTAS IMPORTANTES
# ============================================================================
# 1. Gere chaves seguras com: python -c 'import secrets; print(secrets.token_urlsafe(32))'
# 2. Use secrets management em produção (AWS Secrets, HashiCorp Vault, etc)
# 3. Nunca comita .env com dados reais
# 4. Valide todas as variáveis de ambiente no startup
# 5. Use diferentes valores para dev, staging e production
# 6. Implemente rotação de credenciais regularmente
# 7. Auditoria de acesso a variáveis sensíveis